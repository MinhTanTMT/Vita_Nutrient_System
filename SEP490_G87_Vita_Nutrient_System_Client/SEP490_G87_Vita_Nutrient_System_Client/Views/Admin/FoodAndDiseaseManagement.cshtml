@{
    ViewData["Title"] = "Food and Disease Management";
}

<h2>@ViewData["Title"]</h2>

<!-- Search for Food -->
<div class="mb-3">
    <label for="foodSearch">Search Food:</label>
    <input type="text" id="foodSearch" class="form-control" placeholder="Search food" />
</div>

<!-- Search for Disease -->
<div class="mb-3">
    <label for="diseaseSearch">Search Disease:</label>
    <input type="text" id="diseaseSearch" class="form-control" placeholder="Search disease" />
</div>

<!-- Search for Food and Disease Compatibility -->
<div class="mb-3">
    <label for="foodAndDiseaseSearch">Search Food and Disease Compatibility:</label>
    <input type="text" id="foodAndDiseaseSearch" class="form-control" placeholder="Search food and disease compatibility" />
</div>

<!-- Food Table -->
<h3>Food List</h3>
<table class="table" id="foodTable">
    <thead>
        <tr>
            <th>Name</th>
            <th>Description</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var food in Model.FoodList)
        {
            <tr>
                <td>@food.Name</td>
                <td>@food.Describe</td>
                <td>
                    <button class="btn btn-primary" data-toggle="modal" data-target="#foodModal" data-id="@food.FoodListId" data-name="@food.Name" data-describe="@food.Describe">Edit</button>
                    <button class="btn btn-danger" onclick="deleteFood(@food.FoodListId)">Delete</button>
                </td>
            </tr>
        }
    </tbody>
</table>

<!-- Disease Table -->
<h3>Disease List</h3>
<table class="table" id="diseaseTable">
    <thead>
        <tr>
            <th>Name</th>
            <th>Description</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var disease in Model.DiseaseList)
        {
            <tr>
                <td>@disease.Name</td>
                <td>@disease.Describe</td>
                <td>
                    <button class="btn btn-primary" data-toggle="modal" data-target="#diseaseModal" data-id="@disease.Id" data-name="@disease.Name" data-describe="@disease.Describe">Edit</button>
                    <button class="btn btn-danger" onclick="deleteDisease(@disease.Id)">Delete</button>
                </td>
            </tr>
        }
    </tbody>
</table>

<!-- Food and Disease Compatibility Table -->
<h3>Food and Disease Compatibility</h3>
<table class="table" id="foodAndDiseaseTable">
    <thead>
        <tr>
            <th>Food</th>
            <th>Disease</th>
            <th>Is Good or Bad</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var foodAndDisease in Model.FoodAndDiseaseList)
        {
            <tr>
                <td>@foodAndDisease.FoodList.Name</td>
                <td>@foodAndDisease.ListOfDiseases.Name</td>
                <td>@(foodAndDisease.IsGoodOrBad ? "Good" : "Bad")</td>
                <td>
                    <button class="btn btn-primary" data-toggle="modal" data-target="#foodAndDiseaseModal" data-id="@foodAndDisease.ListOfDiseasesId" data-food-id="@foodAndDisease.FoodListId" data-disease-id="@foodAndDisease.ListOfDiseasesId" data-is-good="@foodAndDisease.IsGoodOrBad">Edit</button>
                    <button class="btn btn-danger" onclick="deleteFoodAndDisease(@foodAndDisease.FoodListId, @foodAndDisease.ListOfDiseasesId)">Delete</button>
                </td>
            </tr>
        }
    </tbody>
</table>

<!-- Modals for Food, Disease, and FoodAndDisease CRUD -->
<!-- Food Modal -->
<div class="modal fade" id="foodModal" tabindex="-1" role="dialog" aria-labelledby="foodModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="foodModalLabel">Edit Food</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="foodId">
                <div class="form-group">
                    <label for="foodName">Food Name</label>
                    <input type="text" class="form-control" id="foodName">
                </div>
                <div class="form-group">
                    <label for="foodDescribe">Description</label>
                    <textarea class="form-control" id="foodDescribe"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id="saveFoodBtn">Save changes</button>
            </div>
        </div>
    </div>
</div>

<!-- Disease Modal -->
<div class="modal fade" id="diseaseModal" tabindex="-1" role="dialog" aria-labelledby="diseaseModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="diseaseModalLabel">Edit Disease</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="diseaseId">
                <div class="form-group">
                    <label for="diseaseName">Disease Name</label>
                    <input type="text" class="form-control" id="diseaseName">
                </div>
                <div class="form-group">
                    <label for="diseaseDescribe">Description</label>
                    <textarea class="form-control" id="diseaseDescribe"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id="saveDiseaseBtn">Save changes</button>
            </div>
        </div>
    </div>
</div>

<!-- Food and Disease Compatibility Modal -->
<div class="modal fade" id="foodAndDiseaseModal" tabindex="-1" role="dialog" aria-labelledby="foodAndDiseaseModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="foodAndDiseaseModalLabel">Edit Food and Disease Compatibility</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="foodAndDiseaseFoodId">
                <input type="hidden" id="foodAndDiseaseDiseaseId">
                <div class="form-group">
                    <label for="foodAndDiseaseIsGood">Is this combination good or bad?</label>
                    <select class="form-control" id="foodAndDiseaseIsGood">
                        <option value="true">Good</option>
                        <option value="false">Bad</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id="saveFoodAndDiseaseBtn">Save changes</button>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // Example of how to handle modal data population and saving
        $('#foodModal').on('show.bs.modal', function (event) {
            var button = $(event.relatedTarget);
            var foodId = button.data('id');
            var foodName = button.data('name');
            var foodDescribe = button.data('describe');

            var modal = $(this);
            modal.find('#foodId').val(foodId);
            modal.find('#foodName').val(foodName);
            modal.find('#foodDescribe').val(foodDescribe);
        });

        $('#saveFoodBtn').click(function () {
            var foodId = $('#foodId').val();
            var foodName = $('#foodName').val();
            var foodDescribe = $('#foodDescribe').val();

            // Call the UpdateFood action here
        });

        // Similar code for Disease and FoodAndDisease modals...

        function deleteFood(foodId) {
            // Handle food deletion here
        }

        function deleteDisease(diseaseId) {
            // Handle disease deletion here
        }

        function deleteFoodAndDisease(foodId, diseaseId) {
            // Handle Food and Disease compatibility deletion here
        }
    </script>
}
